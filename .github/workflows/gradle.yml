# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.
# This workflow will build a Java project with Gradle and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-java-with-gradle

name: Java Gradle

on: push

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 17
        uses: actions/setup-java@v1
        with:
          java-version: '17'

      - name: Build File
        run: |
          chmod +x gradlew 
          ./gradlew build

      - name: Upload File
        uses: actions/upload-artifact@v3
        with:
          name: HeliosClient
          path: build/libs

      - name: discord-action
  # You may pin to the exact commit or the version.
  # uses: sebastianpopp/discord-action@4f2d5417bc61a79593304a62e71cd32427c17790
        uses: sebastianpopp/discord-action@v2.0
        with:
    # Discord webhook URL
            webhook:  ${{ secrets.DISCORD_WEBHOOK }}
    # Message to be sent
            message:  > 
              "content": "Hello, this is a message from my GitHub Actions workflow!",
              "embeds": [
                {
                  "title": "Build Successful",
                  "description": "The build of the project was successful. Here are some details...",
                  "color": 3066993,
                  "fields": [
                    {
                      "name": "Branch",
                      "value": "${{ github.ref }}",
                      "inline": true
                    },
                    {
                      "name": "Commit",
                      "value": "${{ github.sha }}",
                      "inline": true
                    }
                  ]
                }
              ]
            
